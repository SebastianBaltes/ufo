{"version":3,"sources":["webpack:///./src/index.js","webpack:///./src/style/index.scss?f08c","webpack:///./src/components/csg-meshs.js"],"names":["html","$","THREE","AFRAME","BSP","registerComponent","schema","union","type","subtract","intersect","getBSPs","o","list","Array","isArray","forEach","c","geometry","geometrySimple","geometryOriginal","BufferGeometry","Geometry","fromBufferGeometry","changed","bsp","matrixWorld","equals","matrix","clone","mesh","push","object3D","children","tick","source","el","keys","Object","data","filter","key","sets","map","a","x","b","toGeometry"],"mappings":"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","file":"app.bundle.js","sourcesContent":["import \"./style/index.scss\";\nimport \"aframe\";\n\nimport \"aframe-sun-sky\";\nimport \"aframe-environment-component\";\nimport \"aframe-log-component\";\nimport \"aframe-text-geometry-component\";\nimport \"aframe-look-at-component\";\nimport \"aframe-extras\";\nimport \"./components/csg-meshs\";\n\nconst html = `\n\n    <a-scene antialias=\"true\">\n        \n        <a-assets>\n            <img id=\"linoleum\" src=\"server/Marmoleum_Real-3136_concrete.jpg\"></img>\n            <img id=\"rauhfaser\" src=\"server/rauhfa01.jpg\"></img>\n            <a-asset-item id=\"window\" src=\"server/Window/window.dae\"></a-asset-item>\n            <a-asset-item id=\"radiatorObj\" src=\"server/bedroom-heater/[.obj]/Radiateur.obj\"></a-asset-item>\n            <a-asset-item id=\"radiatorMtl\" src=\"server/bedroom-heater/[.obj]/Radiateur.mtl\"></a-asset-item>\n            <a-asset-item id=\"bedObj\" src=\"server/Bed/BED.obj\"></a-asset-item>\n            <a-asset-item id=\"doorDae\" src=\"server/Room-Door/Door_Component_BI3.dae\"></a-asset-item>\n            <img id=\"sky\" src=\"server/tirol.jpg\">\n        </a-assets> \n            \n        <a-entity id=\"myCameraPosition\" position=\"1 -0.5 1\" >\n          <a-entity camera=\"userHeight: 1.7\" look-controls=\"standing: false\"></a-entity>\n        </a-entity>\n\n        <a-sphere id=\"ufo\" \n             radius=\"0.3\" \n             position=\"-50 -10 -100\" \n             scale=\"1 0.18 0.18\" \n             geometry=\"radius:0.18\"\n             rotation=\"0 0 -90\" \n             material=\"sphericalEnvMap:#sky;metalness:1;roughness:0;emissiveIntensity:0.3;color:#ffffff;emissive:#020202\">\n\n            <a-animation attribute=\"rotation\" dur=\"20000\" to=\"0 0 -2000\" easing=\"ease-in-expo\">            \n            </a-animation>        \n            <a-animation attribute=\"position\" dur=\"20000\" to=\"0.869 0.2 -10\" easing=\"ease-in-expo\">            \n            </a-animation>           \n             \n            <a-animation attribute=\"rotation\" begin=\"20000\" dur=\"60000\" from=\"0 0 -2000\" to=\"0 0 -3000\" easing=\"ease-out\">            \n            </a-animation>        \n            <a-animation attribute=\"position\" begin=\"20000\" dur=\"60000\" from=\"0.869 0.2 -10\" to=\"0.869 0.951 -2\" easing=\"ease-out\">            \n            </a-animation>         \n\n            <a-animation attribute=\"rotation\" begin=\"80000\" dur=\"10000\" from=\"0 0 -3000\" to=\"0 0 -3360\" easing=\"ease-in-out\">            \n            </a-animation>        \n            <a-animation attribute=\"position\" begin=\"80000\" dur=\"10000\" from=\"0.869 0.951 -2\" to=\"0.869 0.951 -1.53\" easing=\"ease-in-out\">            \n            </a-animation>         \n\n            <a-animation attribute=\"rotation\" begin=\"90000\" dur=\"10000\" from=\"0 0 -3360\" to=\"0 0 -3720\" easing=\"ease-in-out\" repeat=\"5\">            \n            </a-animation>        \n\n        </a-sphere> \n         \n        <a-sky src=\"#sky\" rotation=\"14 -207 -12\"></a-sky>\n         \n        <a-entity id=\"room\" >\n\n          <a-entity light=\"intensity:0.8;type:ambient;color:#ccc\" id=\"lightAmbient\" position=\"0 0.138 -0.086\"></a-entity>\n\n          <a-box position=\"0 0 0\" width=\"5\" depth=\"3\" height=\"0.2\" material=\"src: #linoleum; repeat: 2 2\" id=\"floor\" ></a-box>\n   \n          <a-box position=\"0 1 -1.5\" width=\"5\" depth=\"0.2\" height=\"2\" material=\"src: #rauhfaser; repeat: 15 10\" id=\"windowWall\" csg-meshs=\"subtract: .windowGroup .hole\"></a-box>\n         \n          <a-box position=\"0 2 0\" width=\"3\" depth=\"3\" height=\"0.2\" material=\"src: #rauhfaser; repeat: 15 10\"></a-box>\n          <a-box position=\"1 2 0\" width=\"5\" depth=\"3\" height=\"0.2\" rotation=\"0 0 -30\" material=\"src: #rauhfaser; repeat: 15 10\"></a-box>\n          \n          <a-box position=\"0 1 1.5\" width=\"5\" depth=\"0.2\" height=\"2\"  material=\"src: #rauhfaser; repeat: 15 10\"></a-box>\n          <a-box position=\"-1.5 1 0\" width=\"0.2\" depth=\"3\" height=\"2\"  material=\"src: #rauhfaser; repeat: 15 10\"></a-box>\n          <a-box position=\"2.5 1 0\" width=\"0.2\" depth=\"3\" height=\"2\"  material=\"src: #rauhfaser; repeat: 15 10\"></a-box>\n         \n          <a-entity position=\"1 0.145 1.035\" scale=\"0.00015 0.00015 0.00015\" obj-model=\"obj: #bedObj\" id=\"bed\"></a-entity>\n          <a-entity position=\"-0.869 0.1 1.446\" scale=\"0.7 0.7 0.7\" collada-model=\"#doorDae\" rotation=\"0 180 0\" id=\"door\"></a-entity>\n\n          <a-entity position=\"-0.386 0 -1.5\" class=\"windowGroup\">\n              <a-box position=\"0.28 1.093 0\" width=\"0.5\" depth=\"1\" height=\"0.5\" class=\"hole\" visible=\"false\" scale=\"1 1.8 0.5\"></a-box>\n              <a-entity position=\"0.279 1.084 0.074\" scale=\"1.2 1.2 1.2\" rotation=\"0 270 0\" collada-model=\"#window\" class=\"window\"></a-entity>          \n              <a-entity position=\"0 0.198 0.146\" scale=\"0.006 0.006 0.006\"  obj-model=\"obj: #radiatorObj; mtl: #radiatorMtl\" class=\"radiator\"></a-entity>\n              <a-entity light=\"intensity:0.3;castShadow:true;decay:0.5;distance:50;type:point\" position=\"0.275 1.16 0.8\" class=\"light\"></a-entity>\n          </a-entity>\n\n          <a-entity position=\"0.623 0 -1.5\" class=\"windowGroup\">\n              <a-box position=\"0.28 1.093 0\" width=\"0.5\" depth=\"1\" height=\"0.5\" class=\"hole\" visible=\"false\" scale=\"1 1.8 0.5\"></a-box>\n              <a-entity position=\"0.279 1.084 0.074\" scale=\"1.2 1.2 1.2\" rotation=\"0 270 0\" collada-model=\"#window\" class=\"window\"></a-entity>          \n              <a-entity position=\"0 0.198 0.146\" scale=\"0.006 0.006 0.006\"  obj-model=\"obj: #radiatorObj; mtl: #radiatorMtl\" class=\"radiator\"></a-entity>\n              <a-entity light=\"intensity:0.3;castShadow:true;decay:0.5;distance:50;type:point\" position=\"0.275 1.16 0.8\" class=\"light\"></a-entity>\n          </a-entity>\n          \n        </a-entity>\n    \n    </a-scene>\n    \n`;\n\n$(() => {\n    $('body').html(html);\n});\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/style/index.scss\n// module id = 368\n// module chunks = 0","import ThreeBSP from 'three-js-csg';\n\nconst THREE = AFRAME.THREE;\nconst BSP = ThreeBSP(THREE);\n\nAFRAME.registerComponent('csg-meshs', {\n\n    schema: {\n        union: {\n            type: 'selectorAll',\n        },\n        subtract: {\n            type: 'selectorAll',\n        },\n        intersect: {\n            type: 'selectorAll',\n        },\n    },\n\n    getBSPs(o, list = []) {\n        if (Array.isArray(o)) {\n            o.forEach(c => this.getBSPs(c, list));\n            return list;\n        }\n        if (o.geometry) {\n            let geometry = o.geometrySimple || o.geometryOriginal || o.geometry;\n            if (geometry instanceof THREE.BufferGeometry) {\n                geometry = o.geometrySimple = new THREE.Geometry().fromBufferGeometry(geometry);\n            }\n            let changed = !(o.bsp && o.bsp.matrixWorld.equals(o.matrixWorld));\n            if (changed) {\n                this.changed = true;\n                const matrix = o.matrixWorld.clone();\n                o.bsp = new BSP(geometry, matrix);\n                o.bsp.mesh = o;\n                o.bsp.matrixWorld = o.matrixWorld.clone();\n            }\n            list.push(o.bsp);\n            return list;\n        }\n        if (o.object3D) {\n            this.getBSPs(o.object3D, list);\n            return list;\n        }\n        if (o.children) {\n            this.getBSPs(o.children, list);\n            return list;\n        }\n        return list;\n    },\n\n    tick() {\n        this.changed = false;\n        const source = this.getBSPs(this.el.object3D);\n        const keys = Object.keys(this.data).filter(key => this.data[key]);\n        const sets = {};\n        keys.forEach(key => sets[key] = this.getBSPs(this.data[key].map(el => el.object3D)));\n        if (this.changed) {\n            source.forEach(a => {\n                let x = a;\n                keys.forEach(key => sets[key].forEach(b => x = x[key](b)));\n                a.mesh.geometryOriginal = a.mesh.geometry;\n                a.mesh.geometry = x.toGeometry();\n            });\n        }\n    },\n\n});\n\n\n// WEBPACK FOOTER //\n// ./src/components/csg-meshs.js"],"sourceRoot":""}